{
  "version": 3,
  "sources": ["../../../../src/core/schemas/builders/union/union.ts"],
  "sourcesContent": ["import { BaseObjectLikeSchema, getObjectLikeUtils, ObjectLikeSchema, OBJECT_LIKE_BRAND } from \"../object-like\";\nimport { getSchemaUtils } from \"../schema-utils\";\nimport { Discriminant } from \"./discriminant\";\nimport { inferParsedDiscriminant, inferParsedUnion, inferRawDiscriminant, inferRawUnion, UnionSubtypes } from \"./types\";\n\nexport function union<D extends string | Discriminant<any, any>, U extends UnionSubtypes<any>>(\n  discriminant: D,\n  union: U\n): ObjectLikeSchema<inferRawUnion<D, U>, inferParsedUnion<D, U>> {\n  const rawDiscriminant =\n    typeof discriminant === \"string\" ? discriminant : (discriminant.rawDiscriminant as inferRawDiscriminant<D>);\n  const parsedDiscriminant =\n    typeof discriminant === \"string\" ? discriminant : (discriminant.parsedDiscriminant as inferParsedDiscriminant<D>);\n\n  const baseSchema: BaseObjectLikeSchema<inferRawUnion<D, U>, inferParsedUnion<D, U>> = {\n    ...OBJECT_LIKE_BRAND,\n\n    parse: (raw, opts) => {\n      const { [rawDiscriminant]: discriminantValue, ...additionalProperties } = raw;\n      const additionalPropertySchemas = union[discriminantValue];\n\n      // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n      if (additionalPropertySchemas == null) {\n        return {\n          ...additionalProperties,\n          [parsedDiscriminant]: discriminantValue,\n        } as inferParsedUnion<D, U>;\n      }\n\n      return {\n        ...additionalPropertySchemas.parse(additionalProperties, opts),\n        [parsedDiscriminant]: discriminantValue,\n      } as inferParsedUnion<D, U>;\n    },\n\n    json: (parsed, opts) => {\n      const { [parsedDiscriminant]: discriminantValue, ...additionalProperties } = parsed;\n      const additionalPropertySchemas = union[discriminantValue];\n\n      // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n      if (additionalPropertySchemas == null) {\n        return {\n          ...additionalProperties,\n          [rawDiscriminant]: discriminantValue,\n        } as unknown as inferRawUnion<D, U>;\n      }\n\n      return {\n        ...additionalPropertySchemas.json(additionalProperties, opts),\n        [rawDiscriminant]: discriminantValue,\n      } as inferRawUnion<D, U>;\n    },\n  };\n\n  return {\n    ...baseSchema,\n    ...getSchemaUtils(baseSchema),\n    ...getObjectLikeUtils(baseSchema),\n  };\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAA8F;AAC9F,0BAA+B;AAIxB,eACL,cACA,QAC+D;AAC/D,QAAM,kBACJ,OAAO,iBAAiB,WAAW,eAAgB,aAAa;AAClE,QAAM,qBACJ,OAAO,iBAAiB,WAAW,eAAgB,aAAa;AAElE,QAAM,aAAgF;AAAA,IACpF,GAAG;AAAA,IAEH,OAAO,CAAC,KAAK,SAAS;AACpB,YAAM,GAAG,kBAAkB,sBAAsB,yBAAyB;AAC1E,YAAM,4BAA4B,OAAM;AAGxC,UAAI,6BAA6B,MAAM;AACrC,eAAO;AAAA,UACL,GAAG;AAAA,UACH,CAAC,qBAAqB;AAAA,QACxB;AAAA,MACF;AAEA,aAAO;AAAA,QACL,GAAG,0BAA0B,MAAM,sBAAsB,IAAI;AAAA,QAC7D,CAAC,qBAAqB;AAAA,MACxB;AAAA,IACF;AAAA,IAEA,MAAM,CAAC,QAAQ,SAAS;AACtB,YAAM,GAAG,qBAAqB,sBAAsB,yBAAyB;AAC7E,YAAM,4BAA4B,OAAM;AAGxC,UAAI,6BAA6B,MAAM;AACrC,eAAO;AAAA,UACL,GAAG;AAAA,UACH,CAAC,kBAAkB;AAAA,QACrB;AAAA,MACF;AAEA,aAAO;AAAA,QACL,GAAG,0BAA0B,KAAK,sBAAsB,IAAI;AAAA,QAC5D,CAAC,kBAAkB;AAAA,MACrB;AAAA,IACF;AAAA,EACF;AAEA,SAAO;AAAA,IACL,GAAG;AAAA,IACH,GAAG,wCAAe,UAAU;AAAA,IAC5B,GAAG,2CAAmB,UAAU;AAAA,EAClC;AACF;",
  "names": []
}
