{
  "version": 3,
  "sources": ["../../../../src/core/schemas/builders/object-like/withProperties.ts"],
  "sourcesContent": ["import { getSchemaUtils } from \"../schema-utils\";\nimport { getObjectLikeUtils } from \"./getObjectLikeUtils\";\nimport { BaseObjectLikeSchema, ObjectLikeSchema, OBJECT_LIKE_BRAND } from \"./types\";\n\nexport function withProperties<RawObjectShape, ParsedObjectShape, Properties>(\n  objectLike: BaseObjectLikeSchema<RawObjectShape, ParsedObjectShape>,\n  properties: { [K in keyof Properties]: Properties[K] | ((parsed: ParsedObjectShape) => Properties[K]) }\n): ObjectLikeSchema<RawObjectShape, ParsedObjectShape & Properties> {\n  const objectSchema: BaseObjectLikeSchema<RawObjectShape, ParsedObjectShape & Properties> = {\n    ...OBJECT_LIKE_BRAND,\n    parse: (raw, opts) => {\n      const parsedObject = objectLike.parse(raw, opts);\n      const additionalProperties = Object.entries(properties).reduce<Record<string, any>>((processed, [key, value]) => {\n        return {\n          ...processed,\n          [key]: typeof value === \"function\" ? value(parsedObject) : value,\n        };\n      }, {});\n\n      return {\n        ...parsedObject,\n        ...(additionalProperties as Properties),\n      };\n    },\n    json: (parsed, opts) => {\n      // strip out added properties\n      const addedPropertyKeys = new Set(Object.keys(properties));\n      const parsedWithoutAddedProperties = Object.entries(parsed).reduce<Record<string, any>>(\n        (filtered, [key, value]) => {\n          if (!addedPropertyKeys.has(key)) {\n            filtered[key] = value;\n          }\n          return filtered;\n        },\n        {}\n      );\n\n      return objectLike.json(parsedWithoutAddedProperties as ParsedObjectShape, opts);\n    },\n  };\n\n  return {\n    ...objectSchema,\n    ...getSchemaUtils(objectSchema),\n    ...getObjectLikeUtils(objectSchema),\n  };\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAA+B;AAC/B,gCAAmC;AACnC,mBAA0E;AAEnE,wBACL,YACA,YACkE;AAClE,QAAM,eAAqF;AAAA,IACzF,GAAG;AAAA,IACH,OAAO,CAAC,KAAK,SAAS;AACpB,YAAM,eAAe,WAAW,MAAM,KAAK,IAAI;AAC/C,YAAM,uBAAuB,OAAO,QAAQ,UAAU,EAAE,OAA4B,CAAC,WAAW,CAAC,KAAK,WAAW;AAC/G,eAAO;AAAA,UACL,GAAG;AAAA,UACH,CAAC,MAAM,OAAO,UAAU,aAAa,MAAM,YAAY,IAAI;AAAA,QAC7D;AAAA,MACF,GAAG,CAAC,CAAC;AAEL,aAAO;AAAA,QACL,GAAG;AAAA,QACH,GAAI;AAAA,MACN;AAAA,IACF;AAAA,IACA,MAAM,CAAC,QAAQ,SAAS;AAEtB,YAAM,oBAAoB,IAAI,IAAI,OAAO,KAAK,UAAU,CAAC;AACzD,YAAM,+BAA+B,OAAO,QAAQ,MAAM,EAAE,OAC1D,CAAC,UAAU,CAAC,KAAK,WAAW;AAC1B,YAAI,CAAC,kBAAkB,IAAI,GAAG,GAAG;AAC/B,mBAAS,OAAO;AAAA,QAClB;AACA,eAAO;AAAA,MACT,GACA,CAAC,CACH;AAEA,aAAO,WAAW,KAAK,8BAAmD,IAAI;AAAA,IAChF;AAAA,EACF;AAEA,SAAO;AAAA,IACL,GAAG;AAAA,IACH,GAAG,wCAAe,YAAY;AAAA,IAC9B,GAAG,kDAAmB,YAAY;AAAA,EACpC;AACF;",
  "names": []
}
