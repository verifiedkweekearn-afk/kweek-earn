{
  "version": 3,
  "sources": ["../../../../src/core/schemas/builders/lazy/lazy.ts"],
  "sourcesContent": ["import { BaseSchema, Schema } from \"../../Schema\";\nimport { getSchemaUtils } from \"../schema-utils\";\n\ntype Getter<Raw, Parsed> = () => Schema<Raw, Parsed>;\ntype MemoizedGetter<Raw, Parsed> = Getter<Raw, Parsed> & { __zurg_memoized?: Schema<Raw, Parsed> };\n\nexport function lazy<Raw, Parsed>(getter: Getter<Raw, Parsed>): Schema<Raw, Parsed> {\n  const baseSchema = constructLazyBaseSchema(getter);\n  return {\n    ...baseSchema,\n    ...getSchemaUtils(baseSchema),\n  };\n}\n\nexport function constructLazyBaseSchema<Raw, Parsed>(getter: Getter<Raw, Parsed>): BaseSchema<Raw, Parsed> {\n  const getSchema = () => {\n    const castedGetter = getter as MemoizedGetter<Raw, Parsed>;\n    if (castedGetter.__zurg_memoized == null) {\n      castedGetter.__zurg_memoized = getter();\n    }\n    return castedGetter.__zurg_memoized;\n  };\n\n  return {\n    parse: (raw) => getSchema().parse(raw),\n    json: (parsed) => getSchema().json(parsed),\n  };\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,0BAA+B;AAKxB,cAA2B,QAAkD;AAClF,QAAM,aAAa,wBAAwB,MAAM;AACjD,SAAO;AAAA,IACL,GAAG;AAAA,IACH,GAAG,wCAAe,UAAU;AAAA,EAC9B;AACF;AAEO,iCAA8C,QAAsD;AACzG,QAAM,YAAY,MAAM;AACtB,UAAM,eAAe;AACrB,QAAI,aAAa,mBAAmB,MAAM;AACxC,mBAAa,kBAAkB,OAAO;AAAA,IACxC;AACA,WAAO,aAAa;AAAA,EACtB;AAEA,SAAO;AAAA,IACL,OAAO,CAAC,QAAQ,UAAU,EAAE,MAAM,GAAG;AAAA,IACrC,MAAM,CAAC,WAAW,UAAU,EAAE,KAAK,MAAM;AAAA,EAC3C;AACF;",
  "names": []
}
